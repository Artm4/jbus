<!DOCTYPE html>
<html>
<head>
        <meta charset="utf-8">
        <title>Demo: Title box</title>
        <link rel="stylesheet" href="../css/demo.css" media="screen">
        <link rel="stylesheet" href="../js/core/dijit/themes/claro/claro.css" media="screen">
        <style>
            #dialog { min-width: 200px; }
        </style>
        <script type="text/javascript">
        dojoConfig = {
                baseUrl: "../js/",
                packages: [                
                    { name: "dojo", location: "core/dojo" },
                    { name: "dijit", location: "core/dijit" },
                    { name: "dojox", location: "core/dojox" },
                    { name: "dstore", location: "core/dstore/" },
                    { name: "app", location: "lib/app" }
                ]               
            };
        </script>
        <script src="../js/core/dojo/dojo.js" data-dojo-config="isDebug: 1, async: 1, parseOnLoad: 1"></script>
        
        <script>
// Require the registry, parser, Dialog, and wait for domReady
require(["dojo/dom","app/collection/Client","dojo/domReady!","dojo/promise/Promise"]
, function(dom,Client,Promise) {
    var clientSet=new Client();
    clientSet.on('update',
            function(event)
            {
                console.log('update');
                console.log(event);
            }
        );    
        clientSet.on('add',
            function(event)
            {
               console.log('add');
                console.log(event);
            }
        );
        clientSet.on('delete',
            function(event)
            {
               console.log('delete');
                console.log(event);
            }
        );
    console.log(clientSet.get(1).then(function(data){console.log(data)}));  
    clientSet.add({"id":4,"name":"Vasko"});
    clientSet.remove(1);
    clientSet.put({"id":5,"name":"Vasko"});
    clientSet.forEach(function (object) {
    	console.log(object)
    });
});
</script>

        
    </head>
<body class="claro">
<!-- and later in the page -->
<div id="dialog"></div>
</body>
</html>
